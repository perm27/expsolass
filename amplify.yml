version: 1
frontend:
  phases:
    # 依存関係のインストール。バックエンド定義も含まれるため、ルートで実行。
    preBuild:
      commands:
        - npm install
    # フロントエンドのビルド。frontend ディレクトリに移動してから実行。
    build:
      commands:
        - cd frontend
        - npm run build
  # 💡 成果物(静的ファイル)が frontend/build/ にあることを指定
  artifacts:
    baseDirectory: frontend/build 
    files:
      - '**/*'
  # 💡 ソースコードの場所を frontend/ に指定 (ホスティングの基本ディレクトリ)
  baseDirectory: frontend 
